# 자동매매 시스템 개발 계획 (애자일)

> **핵심 원칙**: 빠른 사이클로 "지표 구현 → 전략 조합 → 백테스팅 → 학습" 반복!

---

## 🚀 Iteration 1: MVP - 첫 수익 확인 (1-2주)

**목표**: 가장 단순한 전략으로 백테스팅 돌려보기
**도구**: backtesting.py 📦 (빠른 검증)

### 지표 구현 (TDD)
- [x] SMA (Simple Moving Average)
- [x] EMA (Exponential Moving Average)

### 백테스팅 엔진 설정
- [x] backtesting.py 설치 (`uv add backtesting`)
- [x] 과거 데이터 로드 (KIS API에서 일봉 가져오기)
- [x] 우리 지표를 backtesting.py에 연결
- [x] Strategy 클래스 작성

### 첫 전략: 풍선이론 (Volume Breakout)
- [x] 진입 조건:
  - 당일 거래량이 전일 거래량 대비 400% 이상, 2000%이하로 증가
  - 양봉이어야 함 (종가 > 시가)
  - 종가 배팅 (3시 15분에 매수들어간다)
- [x] 매수 제외 조건:
  - 주가 2000원 이하
  - 주가 30만원 이상
  - 위꼬리가 너무 길 경우(고가 대비 종가가 5%이상 차이)
  - EMA 20, 60일 선 역배열
  - EMA 20일선과 종가의 이격이 20% 이상일 경우
  - 거래량 300만개 이하
  - 22% 이상 상승
  - ETF, ETN 등
- [x] 청산 조건 (우선순위 순서):
  - 매수일 시가 이탈
  - 매수일 거래량을 넘는 거래량이 나올 시
  - SMA 20일선 이탈
  - 위꼬리가 너무 긴 양봉이 나올경우. (고가 대비 현재가가 7%이상 차이)
  - 조건 충족 시 장마감 전에 매도 (3시 10분 ~ 20분)

### 회고
- [ ] 수익 났나? 손실 났나?
- [ ] 어떤 구간에서 잘 됐나? 안 됐나?
- [ ] 다음 Iteration에서 뭘 개선할까?

---

## 🎯 현재 상태

**Current Iteration**: Iteration 1 진행 중
- [x] SMA 구현 완료 (TDD)
- [x] EMA 구현 완료 (TDD)
- [x] 백테스팅 엔진 설정 완료
- [ ] 다음: 첫 전략 실행 및 백테스팅 ← **여기부터 시작!**

---

## 💡 개발 원칙

1. **TDD는 지표에만**: 수학 계산은 정확해야 하니까
2. **전략은 백테스팅으로**: 정답이 없으니 실험으로 검증